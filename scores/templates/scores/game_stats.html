{% extends "scores/base.html" %}
{% load static %}

{% block content %}
<div class="container my-5">
  <h1>Game Statistics for {{ game }}</h1>
  
  <h3>Cycle Totals</h3>
  <table class="table table-striped">
    <thead class="table-dark">
      <tr>
        <th>Cycle</th>
        <th>Total Score</th>
      </tr>
    </thead>
    <tbody>
      {% for cycle in cycle_totals %}
        <tr>
          <td>{{ cycle.cycle_number }}</td>
          <td>{{ cycle.cycle_total }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="2" class="text-center">No cycle totals available yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <h3>Round Totals</h3>
  <table class="table table-striped">
    <thead class="table-dark">
      <tr>
        <th>Round</th>
        <th>Total Score</th>
      </tr>
    </thead>
    <tbody>
      {% for round in round_totals %}
        <tr>
          <td>{{ round.round_number }}</td>
          <td>{{ round.round_total }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="2" class="text-center">No round totals available yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <div class="row">
    <div class="col-md-6">
      <h3>Own Team Player Totals</h3>
      <table class="table table-striped">
        <thead class="table-dark">
          <tr>
            <th>Player</th>
            <th>Total Score</th>
          </tr>
        </thead>
        <tbody>
          {% for item in own_totals %}
            <tr>
              <td>{{ item.player_name }}</td>
              <td>{{ item.player_total }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="2" class="text-center">No own team scores recorded yet.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="col-md-6">
      <h3>Opposing Team Player Totals</h3>
      <table class="table table-striped">
        <thead class="table-dark">
          <tr>
            <th>Player</th>
            <th>Total Score</th>
          </tr>
        </thead>
        <tbody>
          {% for item in opp_totals %}
            <tr>
              <td>{{ item.player_name }}</td>
              <td>{{ item.player_total }}</td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="2" class="text-center">No opposing team scores recorded yet.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  
  <h3>Score Differentials by Round</h3>
  <table class="table table-striped">
    <thead class="table-dark">
      <tr>
        <th>Round</th>
        <th>Max Score</th>
        <th>Min Score</th>
        <th>Difference</th>
      </tr>
    </thead>
    <tbody>
      {% for diff in score_diff %}
        <tr>
          <td>{{ diff.round_number }}</td>
          <td>{{ diff.max_score }}</td>
          <td>{{ diff.min_score }}</td>
          <td>{{ diff.differential }}</td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="4" class="text-center">No score differentials available yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
